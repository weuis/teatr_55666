<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Мої квитки</title>
</head>
<body>
  <h1>Ваші квитки</h1>
  <div id="tickets-list"></div>

  <script src="js/main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const token = localStorage.getItem('access');
      if (!token) {
        alert("Будь ласка, увійдіть");
        window.location.href = "login.html";
        return;
      }

      const res = await fetch('http://127.0.0.1:8000/api/v1/theatre/tickets/', {
        headers: { 'Authorization': `Bearer ${token}` }
      });

      const tickets = await res.json();
      const container = document.getElementById('tickets-list');

      if (tickets.length === 0) {
        container.textContent = "У вас немає квитків.";
      } else {
        tickets.forEach(ticket => {
          const div = document.createElement('div');
          div.innerHTML = `
            <h3>${ticket.performance.play.title}</h3>
            <p>Дата: ${ticket.performance.date}</p>
            <p>Місце: ${ticket.seat.number}</p>
            <p>Ціна: ${ticket.price} грн</p>
            <hr/>
          `;
          container.appendChild(div);
        });
      }
    });
  </script>
</body>
</html>
<nav>
  <a href="index.html">Головна</a> |
  <a href="booking.html">Бронювання</a> |
  <a href="my-tickets.html">Мої квитки</a> |
  <a href="payment.html">Оплата</a>
</nav>
